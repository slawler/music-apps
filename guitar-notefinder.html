<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Note Finder</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        h1 {
            margin-bottom: 30px;
        }
        button {
            padding: 15px 30px;
            font-size: 20px;
            margin: 12px;
            cursor: pointer;
        }
        input {
            font-size: 18px;
            width: 60px;
            text-align: center;
        }
        #note {
            font-size: 40px;
            margin: 30px 0;
        }
        .home-button, .volume-button {
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
        }
        .start-button {
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
        }
        .stop-button {
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h3>Guitar Note Finder Exercises</h3>
    <p id="note"><strong>Click to start / stop</strong></p>
    <label for="interval">Interval (seconds):</label>
    <input type="number" id="interval" value="3" min="1">
    
    <div>
        <button class="start-button" onclick="startTrainer()">Start</button>
        <button class="stop-button" onclick="stopTrainer()">Stop</button>
    </div>

    <div>
        <button class="volume-button" onclick="toggleVolume()">ðŸ”Š Volume On</button>
    </div>

    <!-- Back to Home Button -->
    <div>
        <button class="home-button" onclick="goHome()">Back to Home</button>
    </div>

    <script>
        const notes = [
            { note: "A", speak: "A" },
            { note: "A#", speak: "A Sharp" },
            { note: "Bb", speak: "B Flat" },
            { note: "B", speak: "B" },
            { note: "C", speak: "C" },
            { note: "C#", speak: "C Sharp" },
            { note: "Db", speak: "D Flat" },
            { note: "D", speak: "D" },
            { note: "D#", speak: "D Sharp" },
            { note: "Eb", speak: "E Flat" },
            { note: "E", speak: "E" },
            { note: "F", speak: "F" },
            { note: "F#", speak: "F Sharp" },  // Display as F#
            { note: "Gb", speak: "G Flat" },
            { note: "G", speak: "G" },
            { note: "G#", speak: "G Sharp" }
        ];

        const displayNoteMap = {
            "A#": "A#",
            "Bb": "Bb",
            "C#": "C#",
            "Db": "Db",
            "D#": "D#",
            "Eb": "Eb",
            "F#": "F#",
            "Gb": "Gb",
            "G#": "G#"
        };

        const guitarStrings = ["Low E", "A", "D", "G", "B", "High E"];
        
        let intervalId;
        let isPlaying = false;
        let volumeOn = true;

        function startTrainer() {
            let interval = parseInt(document.getElementById("interval").value) * 1000;
            if (intervalId) clearInterval(intervalId);
            intervalId = setInterval(playNote, interval);
            playNote();  
            isPlaying = true;
        }

        function stopTrainer() {
            if (intervalId) clearInterval(intervalId);
            intervalId = null;
            document.getElementById("note").innerHTML = "<strong>Paused</strong>";
            isPlaying = false;
        }

        function playNote() {
            if (!isPlaying) return;

            let selected = notes[Math.floor(Math.random() * notes.length)];
            let selectedString = guitarStrings[Math.floor(Math.random() * guitarStrings.length)];

            // Display the note normally (F#) but speak the full name (F Sharp)
            let displayNote = displayNoteMap[selected.note] || selected.note;
            let message = `On the <strong>${selectedString}</strong> string, play <strong>${displayNote}</strong>`;

            document.getElementById("note").innerHTML = message;

            if (volumeOn && 'speechSynthesis' in window) {
                let utterance = new SpeechSynthesisUtterance(
                    `On the ${selectedString} string, play ${selected.speak}`
                );
                speechSynthesis.speak(utterance);
            }
        }

        // Auto-start after first click
        document.addEventListener('click', () => {
            if (!isPlaying) {
                startTrainer();
                if (volumeOn && 'speechSynthesis' in window) {
                    let utterance = new SpeechSynthesisUtterance("Trainer Ready");
                    speechSynthesis.speak(utterance);
                }
            }
        }, { once: true });

        // Toggle volume
        function toggleVolume() {
            volumeOn = !volumeOn;
            const button = document.querySelector('.volume-button');
            button.innerHTML = volumeOn ? "ðŸ”Š Volume On" : "ðŸ”‡ Volume Off";
        }

        // Back to Home Function
        function goHome() {
            window.location.href = "index.html";
        }
    </script>
</body>
</html>
